<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link href="../../css/publicStyle.css" rel="stylesheet" />
		<link href="../../css/china_antique.css" rel="stylesheet" />
		<link href="../../css/iconfont.css" rel="stylesheet" />
		<link href="../../css/demo.css" rel="stylesheet" />
		<link href="../../css/swiper.min.css" rel="stylesheet" />
		<script src="../../js/jquery-1.11.3.js" type="text/javascript"></script>
		<script src="../../js/rem.js" type="text/javascript"></script>
		<script src="../../js/swiper.min.js" type="text/javascript"></script>
		<script src="../../js/config.js"></script>
		<title>拍卖详情</title>
	</head>
	<body>
		<div class="auction_detail">
			<!-- banner -->
			<div class="index_div">
				<!-- Swiper -->
				<div class="swiper-container">
					<div class="swiper-wrapper banner_list">
					  <!-- <div class="swiper-slide"><img src="../../img/banner01.png"></div>
					  <div class="swiper-slide"><img src="../../img/banner02.png"></div>
					  <div class="swiper-slide"><img src="../../img/banner03.png"></div> -->
					</div>
					<!-- Add Pagination -->
					<div class="swiper-pagination"></div>
				</div>
				<!-- Swiper JS -->
				<script src="../../js/swiper.min.js" type="text/javascript"></script>
				<!-- Initialize Swiper -->
				<script>
				var swiper = new Swiper('.swiper-container', {
				  pagination: {
					el: '.swiper-pagination',
				  },
				});
				</script>
			</div>
			<div class="infor_content">
				<div class="auctiond_info">
					<span class="auctiond_title">资讯详情明清瓷器标题</span>
					<span class="auctiond_state">正在进行</span>
				</div>
				<div class="auctiond_cont">
					<span class="auctiond_money">
						<i class="auctiond_money_top">RM<br/>当前价</i>
						<i class="auctiond_money_mon">1200</i>
					</span>
					<span class="auction_time">11111</span>
				</div>
				<h1 class="center_img"><img src="../../img/banner01.png"></h1>
				<p class="infor_uptitle">出价记录</p>
				<div class="auction_updetail">
					<dl>
						<dt><img src="../../img/111.jpg"></dt>
						<dd class="actionup_title">
							<span class="actionup_name">姓名是</span>
							<span class="actionup_state colorred">领先</span>
						</dd>
						<dd class="actionup_money">
							<span class="actionup_money">1000</span>
							<span class="actionup_time">shij</span>
						</dd>
					</dl>
					<dl>
						<dt><img src="../../img/111.jpg"></dt>
						<dd class="actionup_title">
							<span class="actionup_name">姓名是</span>
							<span class="actionup_state colorred">领先</span>
						</dd>
						<dd class="actionup_money">
							<span class="actionup_money">1000</span>
							<span class="actionup_time">shij</span>
						</dd>
					</dl>
				</div>
			</div>
			<input type="button" value="立即出价"  class="assess_btn" onclick="auctionFun()"/>
			<!-- <footer class="infor_footer">
				<span class="colect_btn">收藏</span>
				<span class="assess_btns">鉴定评估</span>
			</footer> -->
		</div>
	</body>
	<script>
		const loginIn = _Config_.API_PATH + '/api/login'; // 登陆
		const autionDetail = _Config_.API_PATH + '/api/getAuctionDetail';//详情
		const auctionjoin = _Config_.API_PATH + '/api/joinAuction';
		function GetUrlParam(paraName) {
			var url = document.location.toString();
			var arrObj = url.split("?");
			if (arrObj.length > 1) {
				var arrPara = arrObj[1].split("&");
				var arr;
				for (var i = 0; i < arrPara.length; i++) {
					arr = arrPara[i].split("=");
		 
					if (arr != null && arr[0] == paraName) {
						return arr[1];
					}
				}
				return "";
			}
			else {
				return "";
			}
		}
		var auction_id = GetUrlParam("auction_id") //获取当前链接指定字段
		console.log(auction_id)
		var user_id = localStorage.getItem('user_id');
		$(document).ready(function () {
			auciondetailApi()
		})
		// 详情
		let auciondetailApi = () => {
			createAjax({
				type: 'GET',
				dataType: 'JSON',
				url: autionDetail,
				data: {
					auction_id:auction_id,
				}
			}).success(res => {
				console.log(res);
				$(".banner_list").append('<div class="swiper-slide"><img src="'+res.data.image+'"></div>');
				
			}).error(err => {
				console.log(err);
			})
		}
		function auctionFun(){
			createAjax({
				type: 'POST',
				dataType: 'JSON',
				url: auctionjoin,
				data: {	
					user_id:user_id,
					auction_id:auction_id,
				}
			}).success(res => {
				console.log(res);
				if(res.cpde == "1"){
					alert("上传成功！")
				}
			}).error(err => {
				console.log(err);
			})
		}
	</script>
</html>
