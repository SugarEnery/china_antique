<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
		<link href="../../css/publicStyle.css" rel="stylesheet" />
		<link href="../../css/china_antique.css" rel="stylesheet" />
		<link href="../../css/iconfont.css" rel="stylesheet" />
		<link href="../../css/swiper.min.css" rel="stylesheet" />
		<script src="../../js/jquery-1.11.3.js" type="text/javascript"></script>
		<script src="../../js/rem.js" type="text/javascript"></script>
		<script src="../../js/swiper.min.js" type="text/javascript"></script>
		<script src="../../js/config.js"></script>
		<script src="https://cdn.suoluomei.com/common/js2.0/vue/v2.5.16/vue.js"></script>
		<style>
			body,html{
				background-color: #F5F5F5;
			}
			
		</style>
		<title>我的拍卖</title>
	</head>
	<body>
		<div id="colle_div">
			<div v-for="item in auctionList" :key="item.id">
				<div class="colle_div">
					<p class="colle_title">{{item.end_time}}<i class="collection_delete">{{item.status}}</i></p>
					<dl>
						<dt><img :src="item.image"></dt>
						<dd>{{item.name}}</dd>
					</dl>
					<p class="colle_handle">
						<span class="colle_endtime">总计金额: <i class="iconfont colle_money">{{item.end_price}}</i></span> 
						<span class="colle_seemore" @click="seemore(item.id)">查看更多</span>
					</p>
				</div>
			</div>
		</div>
	</body>
	<script>
		const getUserAuctionList = _Config_.API_PATH + '/api/getUserAuctionList'//我的拍卖列表
		var personal = new Vue({
		  el: '#colle_div',
		  data: {
			// active: 'home',
		    nickname: localStorage.getItem('nickname'),
			headimgurl:localStorage.getItem('headimgurl'),
			auctionList:[],
		  },
		  mounted(){
			this.onSearch();
		  },
		  methods:{
		  	onSearch(){
				let user_id = localStorage.getItem('user_id');
				let page ='1';
				let limit = '10';
		  		createAjax({
		  			type: 'GET',
		  			url: getUserAuctionList,
		  			dataType: 'JSON',
		  			data: {
						user_id,
						page,
						limit,
		  			}
		  		}).success(res => {
		  			console.log(res);
					this.auctionList= res.data.data;
		  			console.log(this.auctionList)
		  		}).error(err => {
		  			console.log(err);
		  		})
				
		  	},
			seemore(val){
				window.location.href='auction_detail.html?id='+val;
			}
		  },
		  created(){
		  
		  }
		})
	</script>
</html>
